{"version":3,"sources":["../../../../src/app/bulletin/page.jsx"],"sourcesContent":["import React from 'react';\nimport Header from '../../components/Header';\nimport Footer from '../../components/Footer';\nimport { getDatabase, getBlocks } from '../../lib/notion';\n\n// Revalidate every hour\nexport const revalidate = 3600;\n\nconst Text = ({ text }) => {\n    if (!text) {\n        return null;\n    }\n    return text.map((value, i) => {\n        const {\n            annotations: { bold, code, color, italic, strikethrough, underline },\n            text,\n        } = value;\n        return (\n            <span\n                key={i}\n                className={[\n                    bold ? \"font-bold\" : \"\",\n                    code ? \"bg-gray-100 p-1 rounded font-mono text-sm\" : \"\",\n                    italic ? \"italic\" : \"\",\n                    strikethrough ? \"line-through\" : \"\",\n                    underline ? \"underline\" : \"\",\n                ].join(\" \")}\n                style={color !== \"default\" ? { color } : {}}\n            >\n                {text.link ? <a href={text.link.url} className=\"underline text-blue-600\">{text.content}</a> : text.content}\n            </span>\n        );\n    });\n};\n\nconst renderBlock = (block) => {\n    const { type, id } = block;\n    const value = block[type];\n\n    switch (type) {\n        case \"paragraph\":\n            return (\n                <p className=\"mb-8 text-xl md:text-2xl leading-loose text-[#05121C] font-pretendard font-light\">\n                    <Text text={value.rich_text} />\n                </p>\n            );\n        case \"heading_1\":\n            return (\n                <h1 className=\"text-5xl md:text-6xl font-bold mt-20 mb-20 font-yisunshin text-[#05121C] uppercase tracking-tight\">\n                    <Text text={value.rich_text} />\n                </h1>\n            );\n        case \"heading_2\":\n            return (\n                <h2 className=\"text-4xl font-bold mt-12 mb-12 font-yisunshin text-[#05121C] uppercase tracking-wide\">\n                    <Text text={value.rich_text} />\n                </h2>\n            );\n        case \"heading_3\":\n            return (\n                <h3 className=\"text-3xl font-bold mt-6 mb-6 font-yisunshin text-gray-700\">\n                    <Text text={value.rich_text} />\n                </h3>\n            );\n        case \"bulleted_list_item\":\n            return (\n                <li className=\"mb-4 ml-6 text-xl md:text-2xl leading-loose text-[#05121C] font-pretendard font-light list-disc\">\n                    <Text text={value.rich_text} />\n                </li>\n            );\n        case \"numbered_list_item\":\n            return (\n                <li className=\"mb-4 ml-6 text-xl md:text-2xl leading-loose text-[#05121C] font-pretendard font-light list-decimal\">\n                    <Text text={value.rich_text} />\n                </li>\n            );\n        case \"to_do\":\n            return (\n                <div className=\"flex gap-3 mb-4 items-start text-xl md:text-2xl leading-loose font-pretendard font-light\">\n                    <input type=\"checkbox\" defaultChecked={value.checked} disabled className=\"mt-2 w-5 h-5\" />\n                    <span className={value.checked ? \"line-through text-gray-400\" : \"text-[#05121C]\"}>\n                        <Text text={value.rich_text} />\n                    </span>\n                </div>\n            );\n        case \"toggle\":\n            return (\n                <details className=\"mb-4\">\n                    <summary className=\"cursor-pointer font-bold text-xl md:text-2xl leading-loose text-[#05121C] font-pretendard\">\n                        <Text text={value.rich_text} />\n                    </summary>\n                    <div className=\"pl-4 mt-2 text-gray-500 italic\">\n                        (Toggle content not fully supported in this view yet)\n                    </div>\n                </details>\n            );\n        case \"image\":\n            const src = value.type === \"external\" ? value.external.url : value.file.url;\n            const caption = value.caption ? value.caption[0]?.plain_text : \"\";\n            return (\n                <figure className=\"my-16 rounded-lg overflow-hidden bg-gray-100 shadow-sm\">\n                    <img src={src} alt={caption} className=\"w-full h-auto object-cover\" />\n                    {caption && <figcaption className=\"text-center text-sm text-gray-500 mt-2\">{caption}</figcaption>}\n                </figure>\n            );\n        case \"divider\":\n            return <hr className=\"my-16 border-gray-300\" />;\n        case \"quote\":\n            return (\n                <blockquote className=\"border-l-4 border-[#05121C] pl-6 py-4 my-12 text-gray-600 italic bg-[#F4F3EF] font-pretendard text-lg\">\n                    <Text text={value.rich_text} />\n                </blockquote>\n            );\n        case \"callout\":\n            return (\n                <div className=\"p-4 my-4 bg-[#F4F3EF] rounded-lg border border-gray-200 flex gap-3 shadow-sm font-pretendard\">\n                    <div className=\"text-xl\">{value.icon?.emoji}</div>\n                    <div className=\"text-[#05121C] text-lg\"><Text text={value.rich_text} /></div>\n                </div>\n            );\n        default:\n            return null;\n    }\n};\n\nexport default async function BulletinPage() {\n    const databaseId = process.env.NOTION_SUNDAY_DB_ID;\n    let page = null;\n    let blocks = [];\n    let error = null;\n\n    if (!databaseId) {\n        error = \"NOTION_SUNDAY_DB_ID is not set in .env file.\";\n    } else {\n        try {\n            // Fetch the latest bulletin from the database\n            const pages = await getDatabase(databaseId);\n            if (pages && pages.length > 0) {\n                page = pages[0]; // Get the most recent one\n                blocks = await getBlocks(page.id);\n            }\n        } catch (e) {\n            error = \"Failed to fetch bulletin data. Please check your Notion API Key and Database ID.\";\n            console.error(e);\n        }\n    }\n\n    return (\n        <div className=\"min-h-screen bg-[#F4F3EF]\">\n            <Header />\n\n            <div className=\"pt-40 pb-32 relative max-w-3xl mx-auto px-8 lg:px-0\">\n                {error ? (\n                    <div className=\"p-8 bg-red-50 border border-red-200 rounded-lg text-center text-red-600\">\n                        <p className=\"font-bold mb-2\">Connection Error</p>\n                        <p>{error}</p>\n                    </div>\n                ) : !page ? (\n                    <div className=\"text-center py-20\">\n                        <p className=\"text-xl text-gray-500\">No bulletin found.</p>\n                    </div>\n                ) : (\n                    <div className=\"w-full\">\n                        {/* Page Title */}\n                        <h1 className=\"font-sans font-bold text-5xl md:text-6xl leading-[0.9] tracking-tighter text-[#05121C] uppercase mb-24 text-center\">\n                            {page.properties?.Name?.title?.[0]?.plain_text || \"Untitled Bulletin\"}\n                        </h1>\n\n                        {/* Blocks */}\n                        <div className=\"space-y-2\">\n                            {blocks.map((block) => (\n                                <div key={block.id}>{renderBlock(block)}</div>\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <Footer />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}